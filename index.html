<!-- å¾Œã§æ¶ˆã™ -->

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>ã‹ãªãƒªã‚¹ãƒ‹ãƒ³ã‚°ç·´ç¿’</title>

  <!-- â˜… PWAç”¨ è¿½åŠ ã‚¿ã‚° -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#F7B022">

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{ --brand-1:#667eea; --brand-2:#764ba2; --ok:#28a745; --ng:#dc3545; --muted:#555; --bg:#f6f7fb; }
    body{font-family:'Hiragino Sans','Yu Gothic',sans-serif;background:linear-gradient(135deg,var(--brand-1),var(--brand-2));min-height:100vh;padding:20px}
    .container{width:min(96vw,1024px);margin:0 auto;background:#fff;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.12);overflow:hidden}
    .header{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;background:linear-gradient(45deg,#ff6b6b,#ffa500);color:#fff;padding:18px 20px}
    .header h1{font-size:clamp(1.1rem,2.4vw,1.8rem);line-height:1.25}
    .header p{opacity:.9;font-size:.95rem}

    .section{padding:22px}

    /* menu */
    .menu{padding:22px}
    .menu h2{font-size:1.2rem;margin-bottom:10px}
    .menu-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px}
    .menu-btn{padding:14px;border-radius:12px;border:none;cursor:pointer;font-weight:700;background:linear-gradient(45deg,#667eea,#764ba2);color:#fff}

    /* progress & quiz */
    .progress-wrap{display:flex;gap:12px;align-items:center;margin:8px 0 18px}
    .progress-bar{flex:1;background:#eee;height:10px;border-radius:999px;overflow:hidden}
    .progress{background:linear-gradient(45deg,#ff6b6b,#ffa500);height:100%;border-radius:999px;transition:width .25s ease}
    .progress-label{font-size:.95rem;color:var(--muted);min-width:76px;text-align:right}

    .question{text-align:center;margin:8px 0 18px}
    .qnum{color:#666;font-size:1rem;margin-bottom:10px}
    .audio-prompt{background:linear-gradient(135deg,var(--brand-1),var(--brand-2));color:#fff;padding:18px;border-radius:14px;margin-bottom:18px}
    .play{background:rgba(255,255,255,.2);border:2px solid #fff;color:#fff;padding:10px 18px;border-radius:999px;cursor:pointer;font-size:1rem;font-weight:700}

    .options{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:18px}
    @media (min-width: 900px){.options{gap:16px}}

    .option{background:#f8f9fa;border:3px solid #e9ecef;padding:22px;border-radius:14px;cursor:pointer;transition:all .12s ease;font-size:2.2rem;text-align:center;font-weight:bold}
    .option:hover{border-color:var(--brand-1);background:#f0f4ff;transform:translateY(-1px)}
    .option.selected{border-color:var(--brand-1);background:var(--brand-1);color:#fff}
    .option.correct{border-color:var(--ok);background:var(--ok);color:#fff}
    .option.incorrect{border-color:var(--ng);background:var(--ng);color:#fff}

    .controls{display:flex;gap:12px;justify-content:center}
    .next{background:linear-gradient(45deg,#28a745,#20c997);color:#fff;border:none;padding:12px 22px;border-radius:999px;font-size:1rem;font-weight:700;cursor:pointer;display:none}
    .restart{background:linear-gradient(45deg,var(--brand-1),var(--brand-2));color:#fff;border:none;padding:12px 22px;border-radius:999px;font-size:1rem;font-weight:700;cursor:pointer;display:none}

    /* results */
    .results{text-align:center;display:none;margin-top:8px}
    .score{font-size:2.0rem;color:var(--ok);margin:8px 0}
    .answer-key{background:#f8f9fa;padding:14px;border-radius:10px;margin-top:14px;text-align:left;max-height:320px;overflow:auto}
    .answer-item{display:flex;justify-content:space-between;gap:10px;padding:6px 0;border-bottom:1px solid #e9ecef;font-size:0.95rem}
    .answer-item:last-child{border-bottom:none}
    .wrong-summary{margin-top:14px;background:#fff7f7;border:1px solid #ffd7d7;border-radius:10px;padding:10px}

    /* iPadãƒ›ãƒ¼ãƒ ãƒãƒ¼å¯¾ç­– */
    html,body{height:100%}
    body{padding-bottom:calc(20px + env(safe-area-inset-bottom, 0px));}
    @supports(padding:constant(safe-area-inset-bottom)){ body{padding-bottom:calc(20px + constant(safe-area-inset-bottom));} }
    .controls{margin-bottom:calc(10px + env(safe-area-inset-bottom, 0px));}
    @supports(margin:constant(safe-area-inset-bottom)){ .controls{margin-bottom:calc(10px + constant(safe-area-inset-bottom));} }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1>ğŸ§ ã‹ãªãƒªã‚¹ãƒ‹ãƒ³ã‚°ç·´ç¿’</h1>
        <p>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ãƒ¢ãƒ¼ãƒ‰ã‚’é¸ã³ã€éŸ³ã‚’ãã„ã¦ç­”ãˆã¦ãã ã•ã„ã€‚</p>
      </div>
    </div>

    <!-- === MENU === -->
    <div id="menu" class="menu section">
      <h2>å­¦ç¿’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é¸æŠ</h2>
      <div class="menu-grid">
        <button class="menu-btn" data-script="hira" data-mode="chokuon">ã²ã‚‰ãŒãª ç›´éŸ³</button>
        <button class="menu-btn" data-script="hira" data-mode="tanon">ã²ã‚‰ãŒãª å˜éŸ³</button>
        <button class="menu-btn" data-script="kata" data-mode="chokuon">ã‚«ã‚¿ã‚«ãƒŠ ç›´éŸ³</button>
        <button class="menu-btn" data-script="kata" data-mode="tanon">ã‚«ã‚¿ã‚«ãƒŠ å˜éŸ³</button>
      </div>
    </div>

    <!-- === QUIZ === -->
    <div class="section" id="quiz" style="display:none">
      <div class="progress-wrap">
        <div class="progress-bar"><div class="progress" id="progress"></div></div>
        <div class="progress-label" id="progress-label">0%</div>
      </div>

      <div class="question">
        <div class="qnum" id="qnum">å•é¡Œ 1</div>
        <div class="audio-prompt">
          <h3>ğŸ”Š ã“ã®éŸ³ã‚’èã„ã¦ãã ã•ã„</h3>
          <button class="play" id="play-btn" type="button">â–¶ éŸ³ã‚’å†ç”Ÿ</button>
        </div>
      </div>

      <div class="options" id="options"></div>

      <div class="controls">
        <button class="next" id="next" type="button">æ¬¡ã®å•é¡Œã¸</button>
        <button class="restart" id="restart" type="button">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
      </div>
    </div>

    <!-- === RESULTS === -->
    <div class="results section" id="results">
      <h2>ğŸ“Š çµæœ</h2>
      <div class="score" id="final-score">0 / 0</div>
      <p>æ­£è§£ç‡: <span id="percentage">0%</span></p>
      <div class="wrong-summary" id="wrong-summary" style="display:none"></div>
      <div class="answer-key">
        <h3>ğŸ“ èª¤ç­”ä¸€è¦§ï¼ˆã©ã®éŸ³ã§é–“é•ãˆãŸã‹ï¼‰</h3>
        <div id="answer-list"></div>
      </div>
      <div class="controls" style="margin-top:12px">
        <button class="restart" id="restart2" type="button">ã‚‚ã†ä¸€åº¦ã‚„ã‚‹</button>
      </div>
    </div>
  </div>

<script>
  /* ========= æ–‡å­—é›†åˆ ========= */
  const SEION = ['ã‚','ã„','ã†','ãˆ','ãŠ','ã‹','ã','ã','ã‘','ã“','ã•','ã—','ã™','ã›','ã','ãŸ','ã¡','ã¤','ã¦','ã¨','ãª','ã«','ã¬','ã­','ã®','ã¯','ã²','ãµ','ã¸','ã»','ã¾','ã¿','ã‚€','ã‚','ã‚‚','ã‚„','ã‚†','ã‚ˆ','ã‚‰','ã‚Š','ã‚‹','ã‚Œ','ã‚','ã‚','ã‚’','ã‚“'];
  const DAKUON = ['ãŒ','ã','ã','ã’','ã”','ã–','ã˜','ãš','ãœ','ã','ã ','ã¢','ã¥','ã§','ã©','ã°','ã³','ã¶','ã¹','ã¼'];
  const HANDAKUON = ['ã±','ã´','ã·','ãº','ã½'];
  const YOON = [
    'ãã‚ƒ','ãã‚…','ãã‚‡','ã—ã‚ƒ','ã—ã‚…','ã—ã‚‡','ã¡ã‚ƒ','ã¡ã‚…','ã¡ã‚‡','ã«ã‚ƒ','ã«ã‚…','ã«ã‚‡',
    'ã²ã‚ƒ','ã²ã‚…','ã²ã‚‡','ã¿ã‚ƒ','ã¿ã‚…','ã¿ã‚‡','ã‚Šã‚ƒ','ã‚Šã‚…','ã‚Šã‚‡',
    'ãã‚ƒ','ãã‚…','ãã‚‡','ã˜ã‚ƒ','ã˜ã‚…','ã˜ã‚‡','ã¢ã‚ƒ','ã¢ã‚…','ã¢ã‚‡','ã³ã‚ƒ','ã³ã‚…','ã³ã‚‡','ã´ã‚ƒ','ã´ã‚…','ã´ã‚‡'
  ];
  // å˜éŸ³ãƒ¢ãƒ¼ãƒ‰ã®ç‰¹æ®Šã¯æ’¥éŸ³ã®ã¿ï¼ˆä¿ƒéŸ³ãƒ»é•·éŸ³ã¯é™¤å¤–ï¼‰
  const TOKUSHU_TANON = ['ã‚“'];

  const CHOKUON_SET = [...SEION, ...DAKUON, ...HANDAKUON];
  const TANON_SET = [...new Set([...CHOKUON_SET, ...YOON, ...TOKUSHU_TANON])];

  // ã²ã‚‰â†”ã‚«ãƒŠå¤‰æ›
  const hiraToKata = s => s.replace(/[ã-ã‚“]/g, ch => String.fromCharCode(ch.charCodeAt(0) + 0x60));
  const kataToHira = s => s.replace(/[ã‚¡-ãƒ³]/g, ch => String.fromCharCode(ch.charCodeAt(0) - 0x60));
  const toScript = (arr, script) => script === 'kata' ? arr.map(hiraToKata) : arr;

  /* ========= éŸ³å£°ãƒãƒƒãƒ— ========= */
  const ROMAJI_MAP = {
    'ã‚':'a','ã„':'i','ã†':'u','ãˆ':'e','ãŠ':'o',
    'ã‹':'ka','ã':'ki','ã':'ku','ã‘':'ke','ã“':'ko',
    'ã•':'sa','ã—':'shi','ã™':'su','ã›':'se','ã':'so',
    'ãŸ':'ta','ã¡':'chi','ã¤':'tsu','ã¦':'te','ã¨':'to',
    'ãª':'na','ã«':'ni','ã¬':'nu','ã­':'ne','ã®':'no',
    'ã¯':'ha','ã²':'hi','ãµ':'fu','ã¸':'he','ã»':'ho',
    'ã¾':'ma','ã¿':'mi','ã‚€':'mu','ã‚':'me','ã‚‚':'mo',
    'ã‚„':'ya','ã‚†':'yu','ã‚ˆ':'yo',
    'ã‚‰':'ra','ã‚Š':'ri','ã‚‹':'ru','ã‚Œ':'re','ã‚':'ro',
    'ã‚':'wa','ã‚’':'wo','ã‚“':'n',
    'ãŒ':'ga','ã':'gi','ã':'gu','ã’':'ge','ã”':'go',
    'ã–':'za','ã˜':'ji','ãš':'zu','ãœ':'ze','ã':'zo',
    'ã ':'da','ã¢':'dji','ã¥':'dzu','ã§':'de','ã©':'do',
    'ã°':'ba','ã³':'bi','ã¶':'bu','ã¹':'be','ã¼':'bo',
    'ã±':'pa','ã´':'pi','ã·':'pu','ãº':'pe','ã½':'po',
    'ãã‚ƒ':'kya','ãã‚…':'kyu','ãã‚‡':'kyo',
    'ã—ã‚ƒ':'sha','ã—ã‚…':'shu','ã—ã‚‡':'sho',
    'ã¡ã‚ƒ':'cha','ã¡ã‚…':'chu','ã¡ã‚‡':'cho',
    'ã«ã‚ƒ':'nya','ã«ã‚…':'nyu','ã«ã‚‡':'nyo',
    'ã²ã‚ƒ':'hya','ã²ã‚…':'hyu','ã²ã‚‡':'hyo',
    'ã¿ã‚ƒ':'mya','ã¿ã‚…':'myu','ã¿ã‚‡':'myo',
    'ã‚Šã‚ƒ':'rya','ã‚Šã‚…':'ryu','ã‚Šã‚‡':'ryo',
    'ãã‚ƒ':'gya','ãã‚…':'gyu','ãã‚‡':'gyo',
    'ã˜ã‚ƒ':'ja','ã˜ã‚…':'ju','ã˜ã‚‡':'jo',
    'ã¢ã‚ƒ':'dja','ã¢ã‚…':'dju','ã¢ã‚‡':'djo',
    'ã³ã‚ƒ':'bya','ã³ã‚…':'byu','ã³ã‚‡':'byo',
    'ã´ã‚ƒ':'pya','ã´ã‚…':'pyu','ã´ã‚‡':'pyo',
    'ã£':'xtsu',
    'ãƒ¼':'choon'
  };

  // æ‹¡å¼µå­ãƒ«ãƒ¼ãƒ«ï¼šæ¿éŸ³ãƒ»åŠæ¿éŸ³ãƒ»æ‹—éŸ³ãƒ»æ’¥éŸ³(ã‚“) â†’ .wavã€ãã‚Œä»¥å¤– â†’ .mp3
  function getAudioSrc(kana){
    const hira = /[ã‚¡-ãƒ³]/.test(kana) ? kataToHira(kana) : kana;
    const key = ROMAJI_MAP[hira];
    if(!key){ console.warn('éŸ³å£°ã‚­ãƒ¼æœªå¯¾å¿œ:', kana); return ''; }
    const isWav = (
      DAKUON.includes(hira) ||
      HANDAKUON.includes(hira) ||
      YOON.includes(hira) ||
      hira === 'ã‚“'
    );
    const ext = isWav ? 'wav' : 'mp3';
    return `audio/${key}.${ext}`;
  }

  /* ========= ã‚¯ã‚¤ã‚ºçŠ¶æ…‹ ========= */
  let CURRENT_SCRIPT = 'hira';
  let MASTER_KANA = [];
  let TOTAL = 0;
  let order = [];
  let index = 0;
  let selected = null;
  let score = 0;
  let answers = [];
  let audioEl = null;

  /* ========= DOM ========= */
  const progressEl = document.getElementById('progress');
  const progressLabel = document.getElementById('progress-label');
  const qnumEl = document.getElementById('qnum');
  const optionsEl = document.getElementById('options');
  const nextBtn = document.getElementById('next');
  const restartBtn = document.getElementById('restart');
  const restartBtn2 = document.getElementById('restart2');
  const playBtn = document.getElementById('play-btn');
  const quizEl = document.getElementById('quiz');
  const resultsEl = document.getElementById('results');
  const finalScoreEl = document.getElementById('final-score');
  const percentageEl = document.getElementById('percentage');
  const answerListEl = document.getElementById('answer-list');
  const wrongSummaryEl = document.getElementById('wrong-summary');

  /* ========= ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ========= */
  function shuffle(a){const x=[...a];for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[x[i],x[j]]=[x[j],x[i]];}return x;}

  // ç´›ã‚‰ã‚ã—ã„çµ„ã¿åˆã‚ã›
  const CONFUSABLES = {
    'ãŠ':['ã‚’'],
    'ã‚’':['ãŠ'],
    'ã‚ª':['ãƒ²'],
    'ãƒ²':['ã‚ª'],
    'ãš':['ã¥'],
    'ã¥':['ãš'],
    'ã‚º':['ãƒ…'],
    'ãƒ…':['ã‚º'],
    'ã˜ã‚…':['ã¢ã‚…'],
    'ã¢ã‚…':['ã˜ã‚…'],
    'ã‚¸ãƒ¥':['ãƒ‚ãƒ¥'],
    'ãƒ‚ãƒ¥':['ã‚¸ãƒ¥']
  };

  function makeOptions(correct){
    const banned = new Set(CONFUSABLES[correct]||[]);
    const rest = MASTER_KANA.filter(k=>k!==correct && !banned.has(k));
    const distractors = shuffle(rest).slice(0,3);
    return shuffle([correct, ...distractors]);
  }

  function updateProgress(){
    const p = TOTAL ? Math.round((index / TOTAL) * 100) : 0;
    progressEl.style.width = p + '%';
    progressLabel.textContent = p + '%';
  }

  function stopAudio(){ if(audioEl){ audioEl.pause(); audioEl.currentTime=0; } }
  function playSound(){
    const kana = order[index];
    stopAudio();
    const src = getAudioSrc(kana);
    if(!src) return;
    audioEl = new Audio(src);
    audioEl.play().catch(()=>playBtn.focus());
  }

  function renderQuestion(){
    const kana = order[index];
    qnumEl.textContent = `å•é¡Œ ${index+1} / ${TOTAL}`;

    const opts = makeOptions(kana);
    optionsEl.innerHTML = '';
    opts.forEach((k, i)=>{
      const el = document.createElement('div');
      el.className = 'option';
      el.textContent = k;
      el.onclick = ()=> selectAnswer(i, opts, kana);
      optionsEl.appendChild(el);
    });

    selected = null;
    nextBtn.style.display = 'none';
    restartBtn.style.display = 'none';
    updateProgress();
  }

  function selectAnswer(i, opts, correct){
    if(selected!==null) return;
    selected = i;
    const nodes = document.querySelectorAll('.option');
    nodes.forEach((n,idx)=>{ if(idx===i) n.classList.add('selected'); });

    setTimeout(()=>{
      nodes.forEach((n,idx)=>{
        n.classList.remove('selected');
        if(opts[idx]===correct) n.classList.add('correct');
        else if(idx===i) n.classList.add('incorrect');
      });
      const ok = (opts[i]===correct);
      if(ok){
        score++;
        confetti({ particleCount: 24, spread: 45, origin: { y: 0.65 }, scalar: 0.8 });
      }
      answers.push({question: correct, selected: opts[i], correct, isCorrect: ok});
      nextBtn.style.display = 'inline-block';
      nextBtn.focus();
    }, 120);
  }

  function next(){
    stopAudio();
    index++;
    if(index < TOTAL) renderQuestion();
    else showResults();
  }

  function showResults(){
    quizEl.style.display = 'none';
    resultsEl.style.display = 'block';

    progressEl.style.width = '100%';
    progressLabel.textContent = '100%';

    finalScoreEl.textContent = `${score} / ${TOTAL}`;
    const pct = TOTAL ? Math.round((score/TOTAL)*100) : 0;
    percentageEl.textContent = `${pct}%`;

    answerListEl.innerHTML = '';
    const wrongs = answers.filter(a=>!a.isCorrect);
    if(wrongs.length){
      wrongs.forEach((a, idx)=>{
        const row = document.createElement('div');
        row.className = 'answer-item';
        row.innerHTML = `<span>Q${idx+1} éŸ³: ${a.question}</span><span style="color:#dc3545">é¸: ${a.selected}ï¼ˆæ­£: ${a.correct}ï¼‰</span>`;
        answerListEl.appendChild(row);
      });
      const freq = new Map();
      wrongs.forEach(w=> freq.set(w.question, (freq.get(w.question)||0)+1));
      const sorted = [...freq.entries()].sort((a,b)=> b[1]-a[1]);
      const msg = sorted.map(([k,c])=> `${k}Ã—${c}`).join('ã€');
      wrongSummaryEl.style.display = 'block';
      wrongSummaryEl.innerHTML = `â—ï¸ è‹¦æ‰‹ã ã£ãŸéŸ³: ${msg}`;
    } else {
      wrongSummaryEl.style.display = 'block';
      wrongSummaryEl.innerHTML = 'ğŸ‰ èª¤ç­”ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å…¨å•æ­£è§£ã§ã™ï¼';
      const okMsg = document.createElement('div');
      okMsg.className = 'answer-item';
      okMsg.innerHTML = '<span>ãªã—</span><span style="color:#28a745">âœ“</span>';
      answerListEl.appendChild(okMsg);
    }

    document.getElementById('restart2').style.display='inline-block';
  }

  function restart(){
    stopAudio();
    order = shuffle(MASTER_KANA);
    index = 0; selected = null; score = 0; answers = [];
    quizEl.style.display = 'block';
    resultsEl.style.display = 'none';
    document.getElementById('restart2').style.display='none';
    renderQuestion();
  }

  /* ========= ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‡¦ç† ========= */
  document.querySelectorAll('.menu-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      CURRENT_SCRIPT = btn.dataset.script;
      const mode = btn.dataset.mode;
      const base = (mode === 'chokuon') ? CHOKUON_SET : TANON_SET;
      MASTER_KANA = toScript(base, CURRENT_SCRIPT);
      TOTAL = MASTER_KANA.length;
      order = shuffle(MASTER_KANA);

      document.getElementById('menu').style.display = 'none';
      document.getElementById('quiz').style.display = 'block';

      restart();
    });
  });

  nextBtn.addEventListener('click', next);
  restartBtn.addEventListener('click', ()=>{
    stopAudio();
    document.getElementById('quiz').style.display = 'none';
    document.getElementById('results').style.display = 'none';
    document.getElementById('menu').style.display = 'block';
  });
  document.getElementById('restart2').addEventListener('click', ()=>{
    document.getElementById('results').style.display = 'none';
    document.getElementById('quiz').style.display = 'block';
    restart();
  });
  playBtn.addEventListener('click', playSound);
  document.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter' && nextBtn.style.display !== 'none') nextBtn.click();
  });

  /* ====== ç°¡æ˜“ãƒ†ã‚¹ãƒˆï¼ˆå…ƒã‹ã‚‰ã‚ã‚‹ãƒ†ã‚¹ãƒˆï¼‹è¿½åŠ ãƒ†ã‚¹ãƒˆï¼‰ ====== */
  console.assert(getAudioSrc('ãŒ').endsWith('.wav'), 'ãŒ ã¯ wav ã®ã¯ãš');
  console.assert(getAudioSrc('ã±').endsWith('.wav'), 'ã± ã¯ wav ã®ã¯ãš');
  console.assert(getAudioSrc('ãã‚ƒ').endsWith('.wav'), 'ãã‚ƒ ã¯ wav ã®ã¯ãš');
  console.assert(getAudioSrc('ã‚“').endsWith('.wav'), 'ã‚“ ã¯ wav ã®ã¯ãš');
  console.assert(getAudioSrc('ã‚').endsWith('.mp3'), 'ã‚ ã¯ mp3 ã®ã¯ãš');
  // è¿½åŠ ãƒ†ã‚¹ãƒˆï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰
  console.assert(getAudioSrc('ã‚¬').endsWith('.wav'), 'ã‚¬ ã¯ wav ã®ã¯ãš');
  console.assert(getAudioSrc('ã‚¢').endsWith('.mp3'), 'ã‚¢ ã¯ mp3 ã®ã¯ãš');
</script>

<!-- â˜… PWA Service Worker ç™»éŒ²ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã¯åˆ¥ï¼‰ -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('service-worker.js')
        .then(function(registration) {
          console.log('ServiceWorker registration successful:', registration);
        })
        .catch(function(error) {
          console.log('ServiceWorker registration failed:', error);
        });
    });
  }
</script>

</body>
</html>
